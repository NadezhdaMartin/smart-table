# Проектная работа "Умная таблица"

<h2 align="center"><a  href="https://nadezhdamartin.github.io/smart-table/">Посмотреть на Github Pages</a></h2>

Стек: HTML, CSS, JS, Vite

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/data — папка с входными данными
- src/lib — папка с утилитами, содержащие вспомогательные функции

Важные файлы:
- index.html — HTML-файл главной страницы
- src/main.js — точка входа приложения, подключение, инициализация и использование модулей
- src/data.js — функция инициализации данных
- src/styles.css — корневой файл стилей
- src/lib/utils.js — файл с вспомогательными функциями для настройки таблицы
- src/lib/sort.js — файл с функциями для cортировки
- src/lib/compare.js — файл с функцией для сравнения

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# "Умная таблица"
«Умная таблица» — это таблица с возможностью фильтровать, сортировать и осуществлять поиск данных, с помощью кнопок пагинации перемещаться на определенный номер страницы, а также на первую, последнюю, предыдущую и следующюю страницы, а также сбросить поля с поиском и фильтрами. В ходе выполнения проектной работы был произведен рефакторинг кода — обеспечено получение данных с сервера. Передача происходит через квери параметры поиска, фильтрации, сортировки и пагинации. В компонентах заменена прямая работа с данными на работу с состоянием запроса — то есть набором параметров, которые используются для запроса данных с сервера.

## Архитектура приложения

### Main
Для подключения к таблице шаблонов передаем в настройки таблицы (`sampleTable`) объект с полями. Для инициализации вызываем каждый модуль, передавая необходимые аргументы. Применяем модули к данным в асинхронной функции `render`, которая получает данные с сервера по заданным критериям, а уже после — выводит.

### Data
Возвращает две асинхронные функции: функция получения индексов и функция получения записей о продажах с сервера.

### Table
Инициализирует таблицу и вызывает коллбэк при любых изменениях и нажатиях на кнопки. Для отображения таблицы были переданы идентификаторы шаблонов html-разметки. Преобразованы данные в массив строк на основе шаблона `rowTemplate` (использовано свойство `cloneTemplate`). Присвоены данные с помощью свойства DOM-элемента `textContent` конкретной строки данных. Обработаны события при использовании `addEventListener` 

### Pagination
Возвращаем две функции, чтобы сформировать параметры пагинации до получения данных и перерисовать пагинатор после получения данных(в функции `render()` применяем пагинацию до запроса и обновляем после). Добавлены промежуточные переменные и константы для последующих расчётов (расчитано кол-во строк на основе имеющихся данных). Количество строк равно 10, так как это значение выбрано по умолчанию для отображения в соответствующем селекте. Обработаны действия в пагинации «предыдущая», «следующая», «первая», «последняя» страницы (конструкция `switch`). Получение списка видимых страниц и их вывод - использована утилитарная функция `getPages`. Обновление статуса пагинации происходит на основании расчетов и свойства `textContent` для соответствующих полей.

### Sorting
За настройку отвечают переменные field и order — поле, по которому сортируем, и направление сортировки соответственно. Обработка действия сортировки происходит при нажатии кнопки, которая приходит к нам в `action`. Для переключения её значения сортировки по кругу используем карту переходов. Она реализуется объектом, в котором ключ — это текущее состояние, и его значение — это следующее состояние, состояния внутри неё зациклены (используем утилиту `sortMap`).

### Filtering
Заполнены выпадающие списки данными при помощи перебора по ключам объекта с индексами (переменная `updateIndexes`) и для каждого в соответствующий элемент созданы и выведены теги 'option'. Обработана очистка полей фильтров после проверки наличия действия на кнопке. Функция возвращает две функции: updateIndexes() — для заполнения селекта опциями, applyFiltering() — логика фильтрации.

### Searching
Поиск происходит через сервер, внутри возвращаемой функции устанавливаем в query параметр. Здесь же в шаблоне, помимо поиска, появляется функция сброса фильтров. У кнопки задано type="reset", благодаря встроенному поведению, которое браузер реализует сам, происходит возвращение полей input к начальным значениям (тем, что были прописаны в HTML при загрузке).